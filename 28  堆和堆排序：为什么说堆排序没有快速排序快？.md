## Cue

堆的定义

如何实现堆

堆排序的原理

它为什么不如快排

## Notes

#### 堆的定义

* 它是一个完全二叉树
* 每一个节点都满足大于等于（小于等于）它子树中的任意一个节点

#### 如何实现一个堆

1. 完全二叉树非常适合使用数组进行存储
2. 如何插入一个元素（堆化）
   * 从下往上，直接在数组最后元素插入一个元素，然后通过于父结点的比较和交换，直至它与父节点满足大小关系
   * 从上往下，即正确的删除堆顶元素的方式
3. 删除堆顶元素
   * 直接删除堆顶元素，之后依次遍历左右子节点选出新的堆顶，直到叶子节点。但是这样做可能会导致堆的完全二叉树特性被破坏
   * 将堆顶元素删除后，将数组的最后一个元素放到堆顶，将删除变成一次新的插入操作，这样的删除方法，不会破坏完全二叉树的特性，这就是从上往下的堆化过程

#### 堆排序

1. 建堆

   利用插入的原理，有从下往上和从下往上两种方法。如果是从下往上开始，即从叶子节点开始的话，那么从下标n/2 + 1到n的节点都是叶子节点。

2. 排序

   将堆顶元素与数组最后一位交换，剩下的n-1个元素在重新堆化，依次执行这一过程，直到剩下第一个元素为止，此时数组便是有序的了

3. 总结

   堆排序是不稳定的排序算法，时间复杂度为O(nlgn)

#### 实际开发中，为什么快排性能比堆排好

1. 堆排序的数据访问不是连续的，例如从父节点开始遍历子节点会依次访问下标，1，2，4，8；这样的访问方式，对CPU缓存友好
2. 堆排序的建堆过程，会导致有序度降低，例如原本非常趋于有序的数据，堆化之后反而有序度降低了很多，导致它的数据交换次数会比快排多。

## Summary

了解了堆的基本概念：一种特殊的完全二叉树，所有的子节点和父节点有一致的大小关系。

了解的堆支持的基本操作，插入和删除堆顶元素

理解了堆排序的原理，以及它与快排相比的劣势所在。